/*!
 * ====================================================
 * kityformula-editor - v1.0.0 - 2014-05-13
 * https://github.com/HanCong03/kityformula-editor
 * GitHub: https://github.com/kitygraph/kityformula-editor.git 
 * Copyright (c) 2014 Baidu Kity Group; Licensed MIT
 * ====================================================
 */
!function(){function a(a,b,c){if(d[a]={exports:{},value:null,factory:null},2===arguments.length&&(c=b),"[object Object]"===d.toString.call(c))d[a].value=c;else{if("function"!=typeof c)throw new Error("define函数未定义的行为");d[a].factory=c}}function b(a){var c=d[a],e=null;return c?c.value?c.value:(e=c.factory.call(null,b,c.exports,c),e&&(c.exports=e),c.value=c.exports,c.value):null}function c(a){return b(a)}var d={};a("assembly",[],function(){function a(a,b){this.formula=new kf.Formula(a,b)}function b(a,b,e,f,g){var i,j=null,k=null,l=[],m=b.operand||[],n=null;if(e.operand=[],-1===b.name.indexOf("text")){for(var o=0,p=m.length;p>o;o++)j=m[o],j!==h?j?"string"==typeof j?(m[o]="brackets"===b.name&&2>o?j:"function"===b.name&&0===o?j:c("text",j),e.operand.push(m[o])):(e.operand.push({}),m[o]=arguments.callee(a.operand[o],j,e.operand[e.operand.length-1],f,g)):(m[o]=c("empty"),e.operand.push(m[o])):(l.push(o),g.hasOwnProperty("startOffset")||(g.startOffset=o),g.endOffset=o,b.attr&&b.attr.id&&(g.groupId=b.attr.id));for(2===l.length&&(g.endOffset-=1);o=l.length;)o=l[o-1],m.splice(o,1),l.length--,a.operand.splice(o,1)}if(n=d(b.name),!n)throw new Error("operator type error: not found "+b.operator);i=function(){},i.prototype=n.prototype,k=new i,n.apply(k,m),e.func=k;for(var q in b.callFn)b.callFn.hasOwnProperty(q)&&k[q]&&k[q].apply(k,b.callFn[q]);return b.attr&&(b.attr.id&&(f[b.attr.id]={objGroup:k,strGroup:a}),b.attr["data-root"]&&(f.root={objGroup:k,strGroup:a}),k.setAttr(b.attr)),k}function c(a,b){switch(a){case"empty":return new kf.EmptyExpression;case"text":return new kf.TextExpression(b)}}function d(a){return g[a]||kf[a.replace(/^[a-z]/i,function(a){return a.toUpperCase()}).replace(/-([a-z])/gi,function(a,b){return b.toUpperCase()})+"Expression"]}function e(a){var b={};if("[object Array]"==={}.toString.call(a)){b=[];for(var c=0,d=a.length;d>c;c++)b[c]=f(a[c])}else for(var e in a)a.hasOwnProperty(e)&&(b[e]=f(a[e]));return b}function f(a){return a?"object"!=typeof a?a:e(a):a}var g={},h="";return a.prototype.generateBy=function(a){var c=a.tree,d={},f={},g={};return"string"!=typeof c?(this.formula.appendExpression(b(c,e(c),d,g,f)),{select:f,parsedTree:c,tree:d,mapping:g}):(d=new kf.TextExpression(c),void this.formula.appendExpression(d))},a.prototype.regenerateBy=function(a){return this.formula.clearExpressions(),this.generateBy(a)},{use:function(b,c){return new a(b,c)}}}),a("impl/latex/base/latex-utils",["impl/latex/base/rpn","impl/latex/base/utils","impl/latex/define/type","impl/latex/base/tree","impl/latex/handler/combination"],function(a){return{toRPNExpression:a("impl/latex/base/rpn"),generateTree:a("impl/latex/base/tree")}}),a("impl/latex/base/rpn",["impl/latex/base/utils","impl/latex/define/operator","impl/latex/define/func","impl/latex/handler/func","impl/latex/define/type"],function(a){function b(a){for(var b=[],c=null;void 0!==(c=a.pop());)if(!c||"object"!=typeof c||c.sign!==!1&&"function"!==c.name)b.push(c);else{var d=c.handler(c,[],b.reverse());b.unshift(d),b.reverse()}return b.reverse()}var c=a("impl/latex/base/utils");return function(d){var e=[],f=(a("impl/latex/define/type"),null);for(d=b(d);f=d.shift();)"combination"===f.name&&1===f.operand.length&&"brackets"===f.operand[0].name&&(f=f.operand[0]),e.push(c.isArray(f)?arguments.callee(f):f);return e}}),a("impl/latex/base/tree",["impl/latex/define/type","impl/latex/handler/combination","impl/latex/base/utils","impl/latex/define/operator","impl/latex/define/func","impl/latex/handler/func"],function(a){var b=(a("impl/latex/define/type"),a("impl/latex/handler/combination")),c=a("impl/latex/base/utils");return function(a){for(var d=null,e=[],f=0,g=a.length;g>f;f++)c.isArray(a[f])&&(a[f]=arguments.callee(a[f]));for(;d=a.shift();)e.push("object"==typeof d&&d.handler?d.handler(d,e,a):d);return b(e)}}),a("impl/latex/base/utils",["impl/latex/define/operator","impl/latex/handler/script","impl/latex/define/type","impl/latex/handler/fraction","impl/latex/handler/sqrt","impl/latex/handler/summation","impl/latex/handler/integration","impl/latex/handler/brackets","impl/latex/handler/mathcal","impl/latex/handler/mathfrak","impl/latex/handler/mathbb","impl/latex/handler/mathrm","impl/latex/define/func","impl/latex/handler/func","impl/latex/handler/lib/script-extractor"],function(a){var b=a("impl/latex/define/operator"),c=a("impl/latex/define/func"),d=a("impl/latex/handler/func"),e={getLatexType:function(a){return a=a.replace(/^\\/,""),b[a]?"operator":c[a]?"function":"text"},isArray:function(a){return a&&"[object Array]"===Object.prototype.toString.call(a)},getDefine:function(a){return e.extend({},b[a.replace("\\","")])},getFuncDefine:function(a){return{name:"function",params:a.replace(/^\\/,""),handler:d}},getBracketsDefine:function(a,c){return e.extend({params:[a,c]},b.brackets)},extend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}};return e}),a("impl/latex/define/brackets",[],function(){var a=!0;return{".":a,"{":a,"}":a,"[":a,"]":a,"(":a,")":a,"|":a}}),a("impl/latex/define/func",[],function(){return{sin:1,cos:1,arccos:1,cosh:1,det:1,inf:1,limsup:1,Pr:1,tan:1,arcsin:1,cot:1,dim:1,ker:1,ln:1,sec:1,tanh:1,arctan:1,coth:1,exp:1,lg:1,log:1,arg:1,csc:1,gcd:1,lim:1,max:1,sinh:1,cos:1,deg:1,hom:1,liminf:1,min:1,sup:1}}),a("impl/latex/define/operator",["impl/latex/handler/script","impl/latex/define/type","impl/latex/handler/fraction","impl/latex/handler/sqrt","impl/latex/handler/combination","impl/latex/handler/summation","impl/latex/handler/lib/script-extractor","impl/latex/handler/integration","impl/latex/handler/brackets","impl/latex/define/brackets","impl/latex/handler/mathcal","impl/latex/handler/mathfrak","impl/latex/handler/mathbb","impl/latex/handler/mathrm"],function(a){var b=a("impl/latex/handler/script"),c=a("impl/latex/define/type");return{"^":{name:"superscript",type:c.OP,handler:b},_:{name:"subscript",type:c.OP,handler:b},frac:{name:"fraction",type:c.FN,sign:!1,handler:a("impl/latex/handler/fraction")},sqrt:{name:"radical",type:c.FN,sign:!1,handler:a("impl/latex/handler/sqrt")},sum:{name:"summation",type:c.FN,traversal:"rtl",handler:a("impl/latex/handler/summation")},"int":{name:"integration",type:c.FN,traversal:"rtl",handler:a("impl/latex/handler/integration")},brackets:{name:"brackets",type:c.FN,handler:a("impl/latex/handler/brackets")},mathcal:{name:"mathcal",type:c.FN,sign:!1,handler:a("impl/latex/handler/mathcal")},mathfrak:{name:"mathfrak",type:c.FN,sign:!1,handler:a("impl/latex/handler/mathfrak")},mathbb:{name:"mathbb",type:c.FN,sign:!1,handler:a("impl/latex/handler/mathbb")},mathrm:{name:"mathrm",type:c.FN,sign:!1,handler:a("impl/latex/handler/mathrm")}}}),a("impl/latex/define/pre",["impl/latex/pre/int","impl/latex/pre/quot"],function(a){return{"int":a("impl/latex/pre/int"),quot:a("impl/latex/pre/quot")}}),a("impl/latex/define/reverse",["impl/latex/reverse/combination","impl/latex/reverse/fraction","impl/latex/reverse/func","impl/latex/reverse/integration","impl/latex/reverse/subscript","impl/latex/reverse/superscript","impl/latex/reverse/script","impl/latex/reverse/sqrt","impl/latex/reverse/summation","impl/latex/reverse/brackets","impl/latex/reverse/mathcal","impl/latex/reverse/mathfrak","impl/latex/reverse/mathbb","impl/latex/reverse/mathrm"],function(a){return{combination:a("impl/latex/reverse/combination"),fraction:a("impl/latex/reverse/fraction"),"function":a("impl/latex/reverse/func"),integration:a("impl/latex/reverse/integration"),subscript:a("impl/latex/reverse/subscript"),superscript:a("impl/latex/reverse/superscript"),script:a("impl/latex/reverse/script"),radical:a("impl/latex/reverse/sqrt"),summation:a("impl/latex/reverse/summation"),brackets:a("impl/latex/reverse/brackets"),mathcal:a("impl/latex/reverse/mathcal"),mathfrak:a("impl/latex/reverse/mathfrak"),mathbb:a("impl/latex/reverse/mathbb"),mathrm:a("impl/latex/reverse/mathrm")}}),a("impl/latex/define/special",[],function(){return{"#":1,$:1,"%":1,_:1,"&":1,"{":1,"}":1,"^":1,"~":1}}),a("impl/latex/define/type",[],function(){return{OP:1,FN:2}}),a("impl/latex/handler/brackets",["impl/latex/define/brackets"],function(a){var b=a("impl/latex/define/brackets");return function(a,c,d){for(var e=0,f=a.params.length;f>e;e++)if(!(a.params[e]in b))throw new Error("Brackets: invalid params");return a.operand=a.params,a.params[2]=d.shift(),delete a.handler,delete a.params,a}}),a("impl/latex/handler/combination",[],function(){return function(){return{name:"combination",operand:arguments[0]||[]}}}),a("impl/latex/handler/fraction",[],function(){return function(a,b,c){var d=c.shift(),e=c.shift();if(void 0===d||void 0===e)throw new Error("Frac: Syntax Error");return a.operand=[d,e],delete a.handler,a}}),a("impl/latex/handler/func",["impl/latex/handler/lib/script-extractor"],function(a){var b=a("impl/latex/handler/lib/script-extractor");return function(a,c,d){var e=b.exec(d);return a.operand=[a.params,e.expr,e.superscript,e.subscript],delete a.params,delete a.handler,a}}),a("impl/latex/handler/integration",["impl/latex/handler/lib/script-extractor"],function(a){var b=a("impl/latex/handler/lib/script-extractor");return function(a,c,d){var e=d.shift(),f=b.exec(d);return a.operand=[f.expr,f.superscript,f.subscript],a.callFn={setType:[0|e]},delete a.handler,a}}),a("impl/latex/handler/lib/script-extractor",[],function(){function a(a){var c=b(a),d=null,e={superscript:null,subscript:null};if(!c)return e;if(d=b(a),e[c.type]=c.value||null,d){if(d.type===c.type)throw new Error("Script: syntax error!");e[d.type]=d.value||null}return e}function b(a){var b=a.shift();return b?"subscript"===b.name||"superscript"===b.name?{type:b.name,value:a.shift()}:(a.unshift(b),null):null}return{exec:function(b){var c=a(b),d=b.shift();if(d&&d.name&&-1!==d.name.indexOf("script"))throw new Error("Script: syntax error!");return c.expr=d||null,c}}}),a("impl/latex/handler/mathbb",[],function(){return function(a,b,c){var d=c.shift();return"object"==typeof d&&"combination"===d.name&&(d=d.operand.join("")),a.name="text",a.attr={_reverse:"mathbb"},a.callFn={setFamily:["KF AMS BB"]},a.operand=[d],delete a.handler,a}}),a("impl/latex/handler/mathcal",[],function(){return function(a,b,c){var d=c.shift();return"object"==typeof d&&"combination"===d.name&&(d=d.operand.join("")),a.name="text",a.attr={_reverse:"mathcal"},a.callFn={setFamily:["KF AMS CAL"]},a.operand=[d],delete a.handler,a}}),a("impl/latex/handler/mathfrak",[],function(){return function(a,b,c){var d=c.shift();return"object"==typeof d&&"combination"===d.name&&(d=d.operand.join("")),a.name="text",a.attr={_reverse:"mathfrak"},a.callFn={setFamily:["KF AMS FRAK"]},a.operand=[d],delete a.handler,a}}),a("impl/latex/handler/mathrm",[],function(){return function(a,b,c){var d=c.shift();return"object"==typeof d&&"combination"===d.name&&(d=d.operand.join("")),a.name="text",a.attr={_reverse:"mathrm"},a.callFn={setFamily:["KF AMS ROMAN"]},a.operand=[d],delete a.handler,a}}),a("impl/latex/handler/script",[],function(){return function(a,b,c){var d=b.pop(),e=c.shift()||null;if(!e)throw new Error("Missing script");if(d=d||"",d.name===a.name||"script"===d.name)throw new Error("script error");return"subscript"===d.name?(d.name="script",d.operand[2]=d.operand[1],d.operand[1]=e,d):"superscript"===d.name?(d.name="script",d.operand[2]=e,d):(a.operand=[d,e],delete a.handler,a)}}),a("impl/latex/handler/sqrt",["impl/latex/handler/combination"],function(a){var b=a("impl/latex/handler/combination");return function(a,c,d){var e=d.shift(),f=null,g=null;if("["===e){for(e=[];(f=d.shift())&&"]"!==f;)e.push(f);e=0===e.length?null:b(e),g=d.shift()}else g=e,e=null;return a.operand=[g,e],delete a.handler,a}}),a("impl/latex/handler/summation",["impl/latex/handler/lib/script-extractor"],function(a){var b=a("impl/latex/handler/lib/script-extractor");return function(a,c,d){var e=b.exec(d);return a.operand=[e.expr,e.superscript,e.subscript],delete a.handler,a}}),a("impl/latex/latex",["parser","impl/latex/base/latex-utils","impl/latex/base/rpn","impl/latex/base/tree","impl/latex/define/pre","impl/latex/pre/int","impl/latex/pre/quot","impl/latex/serialization","impl/latex/define/reverse","impl/latex/define/special","impl/latex/define/operator","impl/latex/handler/script","impl/latex/define/type","impl/latex/handler/fraction","impl/latex/handler/sqrt","impl/latex/handler/summation","impl/latex/handler/integration","impl/latex/handler/brackets","impl/latex/handler/mathcal","impl/latex/handler/mathfrak","impl/latex/handler/mathbb","impl/latex/handler/mathrm","impl/latex/reverse/combination","impl/latex/reverse/fraction","impl/latex/reverse/func","impl/latex/reverse/integration","impl/latex/reverse/subscript","impl/latex/reverse/superscript","impl/latex/reverse/script","impl/latex/reverse/sqrt","impl/latex/reverse/summation","impl/latex/reverse/brackets","impl/latex/reverse/mathcal","impl/latex/reverse/mathfrak","impl/latex/reverse/mathbb","impl/latex/reverse/mathrm","impl/latex/base/utils","impl/latex/define/func","impl/latex/handler/func"],function(a){function b(a){if(d(a))return a.substring(1);switch(m.getLatexType(a)){case"operator":return m.getDefine(a);case"function":return m.getFuncDefine(a);default:return c(a)}}function c(a){return 0===a.indexOf("\\")?a+"\\":a}function d(a){return 0===a.indexOf("\\")?!!l[a.substring(1)]:!1}function e(a){return a.replace(/\\\s+/,"").replace(/\s*([^a-z0-9\s])\s*/gi,function(a,b){return b})}var f=a("parser").Parser,g=a("impl/latex/base/latex-utils"),h=a("impl/latex/define/pre"),i=a("impl/latex/serialization"),j=a("impl/latex/define/operator"),k=a("impl/latex/define/reverse"),l=a("impl/latex/define/special"),m=a("impl/latex/base/utils"),n="￸",o="￼",p=new RegExp(n+"|"+o,"g"),q=new RegExp(n,"g"),r=new RegExp(o,"g");f.register("latex",f.implement({parse:function(a){var b=this.split(this.format(a));return b=this.parseToGroup(b),b=this.parseToStruct(b),this.generateTree(b)},serialization:function(a,b){return i(a,b)},expand:function(a){var b=a.parse,c=null,d=a.pre,e=a.reverse;for(var f in b)b.hasOwnProperty(f)&&(c=f.replace(/\\/g,""),j[c]=b[f]);for(var f in e)e.hasOwnProperty(f)&&(k[f.replace(/\\/g,"")]=e[f]);if(d)for(var f in d)d.hasOwnProperty(f)&&(h[f.replace(/\\/g,"")]=d[f])},format:function(a){a=e(a),a=a.replace(p,"").replace(/\\{/gi,n).replace(/\\}/gi,o);for(var b in h)h.hasOwnProperty(b)&&(a=h[b](a));return a},split:function(a){var b=[],c=/(?:\\[^a-z]\s*)|(?:\\[a-z]+\s*)|(?:[{}]\s*)|(?:[^\\{}]\s*)/gi,d=/^\s+|\s+$/g,e=null;for(a=a.replace(d,"");e=c.exec(a);)e=e[0].replace(d,""),e&&b.push(e);return b},generateTree:function(a){for(var b=[],c=null;c=a.shift();)b.push(m.isArray(c)?this.generateTree(c):c);return b=g.toRPNExpression(b),g.generateTree(b)},parseToGroup:function(a){for(var b=[],c=[b],d=0,e=0,f=0,g=a.length;g>f;f++)switch(a[f]){case"{":d++,c.push(b),b.push([]),b=b[b.length-1];break;case"}":d--,b=c.pop();break;case"\\left":e++,c.push(b),b.push([[]]),b=b[b.length-1][0],b.type="brackets",f++,b.leftBrackets=a[f].replace(q,"{").replace(r,"}");break;case"\\right":e--,f++,b.rightBrackets=a[f].replace(q,"{").replace(r,"}"),b=c.pop();break;default:b.push(a[f].replace(q,"\\{").replace(r,"\\}"))}if(0!==d)throw new Error("Group Error!");if(0!==e)throw new Error("Brackets Error!");return c[0]},parseToStruct:function(a){for(var c=[],d=0,e=a.length;e>d;d++)m.isArray(a[d])?"brackets"===a[d].type?(c.push(m.getBracketsDefine(a[d].leftBrackets,a[d].rightBrackets)),c.push(this.parseToStruct(a[d]))):c.push(this.parseToStruct(a[d])):c.push(b(a[d]));return c}}))}),a("impl/latex/pre/int",[],function(){return function(a){return a.replace(/\\(i+)nt(\b|[^a-zA-Z])/g,function(a,b,c){return"\\int "+b.length+c})}}),a("impl/latex/pre/quot",[],function(){return function(a){return a.replace(/``/g,"“")}}),a("impl/latex/reverse/brackets",[],function(){return function(a){return("{"===a[0]||"}"===a[0])&&(a[0]="\\"+a[0]),("{"===a[1]||"}"===a[1])&&(a[1]="\\"+a[1]),["\\left",a[0],a[2],"\\right",a[1]].join(" ")}}),a("impl/latex/reverse/combination",[],function(){new RegExp("","g");return function(a){return this.attr["data-root"]||this.attr["data-placeholder"]?a.join(""):"{"+a.join("")+"}"}}),a("impl/latex/reverse/fraction",[],function(){return function(a){return"\\frac "+a[0]+" "+a[1]}}),a("impl/latex/reverse/func",[],function(){return function(a){var b=["\\"+a[0]];return a[2]&&b.push("^"+a[2]),a[3]&&b.push("_"+a[3]),a[1]&&b.push(" "+a[1]),b.join("")}}),a("impl/latex/reverse/integration",[],function(){return function(a){var b=["\\int "];if(this.callFn&&this.callFn.setType){b=["\\"];for(var c=0,d=this.callFn.setType;d>c;c++)b.push("i");b.push("nt ")}return a[1]&&b.push("^"+a[1]),a[2]&&b.push("_"+a[2]),a[0]&&b.push(" "+a[0]),b.join("")}}),a("impl/latex/reverse/mathbb",[],function(){return function(a){return"\\mathbb{"+a[0]+"}"}}),a("impl/latex/reverse/mathcal",[],function(){return function(a){return"\\mathcal{"+a[0]+"}"}}),a("impl/latex/reverse/mathfrak",[],function(){return function(a){return"\\mathfrak{"+a[0]+"}"}}),a("impl/latex/reverse/mathrm",[],function(){return function(a){return"\\mathrm{"+a[0]+"}"}}),a("impl/latex/reverse/script",[],function(){return function(a){return a[0]+"^"+a[1]+"_"+a[2]}}),a("impl/latex/reverse/sqrt",[],function(){return function(a){var b=["\\sqrt"];return a[1]&&b.push("["+a[1]+"]"),b.push(" "+a[0]),b.join("")}}),a("impl/latex/reverse/subscript",[],function(){return function(a){return a[0]+"_"+a[1]}}),a("impl/latex/reverse/summation",[],function(){return function(a){var b=["\\sum "];return a[1]&&b.push("^"+a[1]),a[2]&&b.push("_"+a[2]),a[0]&&b.push(" "+a[0]),b.join("")}}),a("impl/latex/reverse/superscript",[],function(){return function(a){return a[0]+"^"+a[1]}}),a("impl/latex/serialization",["impl/latex/define/reverse","impl/latex/reverse/combination","impl/latex/reverse/fraction","impl/latex/reverse/func","impl/latex/reverse/integration","impl/latex/reverse/subscript","impl/latex/reverse/superscript","impl/latex/reverse/script","impl/latex/reverse/sqrt","impl/latex/reverse/summation","impl/latex/reverse/brackets","impl/latex/reverse/mathcal","impl/latex/reverse/mathfrak","impl/latex/reverse/mathbb","impl/latex/reverse/mathrm","impl/latex/define/special"],function(a){function b(a,e){var g=[],h=null,i=null;if("object"!=typeof a)return c(a)?"\\"+a+" ":a.replace(f,function(a,b){return b+" "});"combination"===a.name&&1===a.operand.length&&"combination"===a.operand[0].name&&(a=a.operand[0]),i=a.operand;for(var j=0,k=i.length;k>j;j++)g.push(i[j]?b(i[j]):i[j]);return h=a.attr&&a.attr._reverse?a.attr._reverse:a.name,d[h].call(a,g,e)}function c(a){return!!e[a]}var d=a("impl/latex/define/reverse"),e=a("impl/latex/define/special"),f=/(\\(?:[\w]+)|(?:[^a-z]))\\/gi;return function(a,c){return b(a,c)}}),a("parser",[],function(a,b,c){function d(a){this.impl=new a,this.conf={}}function e(){this.conf={}}var f={},g={},h={extend:function(a,b){var c=null;b=[].slice.call(arguments,1);for(var d=0,e=b.length;e>d;d++){c=b[d];for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])}},setData:function(a,b,c){if("string"==typeof b)a[b]=c;else{if("object"!=typeof b)throw new Error("invalid option");for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}}},i={use:function(a){if(!g[a])throw new Error("unknown parser type");return this.proxy(g[a])},config:function(a,b){return h.setData(f,a,b),this},register:function(a,b){return g[a.toLowerCase()]=b,this},implement:function(a){var b=function(){},c=a.constructor||function(){},d=function(){e.call(this),c.call(this)};b.prototype=e.prototype,d.prototype=new b,delete a.constructor;for(var f in a)"constructor"!==f&&a.hasOwnProperty(f)&&(d.prototype[f]=a[f]);return d},proxy:function(a){return new d(a)}};h.extend(d.prototype,{config:function(a,b){h.setData(this.conf,a,b)},set:function(a,b){this.impl.set(a,b)},parse:function(a){var b={config:{},tree:this.impl.parse(a)};return h.extend(b.config,f,this.conf),b},serialization:function(a,b){return this.impl.serialization(a,b)},expand:function(a){this.impl.expand(a)}}),h.extend(e.prototype,{set:function(a,b){h.extend(this.conf,a,b)},parse:function(){throw new Error("Abstract function")}}),c.exports={Parser:i,ParserInterface:e}}),function(b){a("kf.start",function(a){var c=a("parser").Parser;a("impl/latex/latex"),b.kf.Parser=c,b.kf.Assembly=a("assembly")});try{c("kf.start")}catch(d){}}(this)}();